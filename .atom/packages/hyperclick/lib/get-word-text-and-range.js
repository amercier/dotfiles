Object.defineProperty(exports, '__esModule', {
  value: true
});
exports['default'] = getWordTextAndRange;

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

var _atom = require('atom');

var _hyperclickUtils = require('./hyperclick-utils');

/**
 * Returns the text and range for the word that contains the given position.
 */
'use babel';

function getWordTextAndRange(textEditor, position, wordRegExp) {
  var textAndRange = { text: '', range: new _atom.Range(position, position) };
  wordRegExp = wordRegExp || (0, _hyperclickUtils.defaultWordRegExpForEditor)(textEditor);
  if (!wordRegExp) {
    return textAndRange;
  }

  var buffer = textEditor.getBuffer();
  buffer.scanInRange(wordRegExp, buffer.rangeForRow(position.row), function (data) {
    if (data.range.containsPoint(position)) {
      textAndRange = {
        text: data.matchText,
        range: data.range
      };
      data.stop();
    } else if (data.range.end.column > position.column) {
      // Stop the scan if the scanner has passed our position.
      data.stop();
    }
  });

  return textAndRange;
}

module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBwZmw1Mm5wdWJsaXNoX3BhY2thZ2VzL2FwbS9oeXBlcmNsaWNrL2xpYi9nZXQtd29yZC10ZXh0LWFuZC1yYW5nZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7cUJBaUJ3QixtQkFBbUI7Ozs7Ozs7Ozs7b0JBTnZCLE1BQU07OytCQUNlLG9CQUFvQjs7Ozs7QUFaN0QsV0FBVyxDQUFDOztBQWlCRyxTQUFTLG1CQUFtQixDQUN2QyxVQUFzQixFQUN0QixRQUFvQixFQUNwQixVQUFvQixFQUFnQztBQUN0RCxNQUFJLFlBQVksR0FBRyxFQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLFVBVi9CLEtBQUssQ0FVb0MsUUFBUSxFQUFFLFFBQVEsQ0FBQyxFQUFDLENBQUM7QUFDcEUsWUFBVSxHQUFHLFVBQVUsSUFBSSxxQkFWckIsMEJBQTBCLEVBVXNCLFVBQVUsQ0FBQyxDQUFDO0FBQ2xFLE1BQUksQ0FBQyxVQUFVLEVBQUU7QUFDZixXQUFPLFlBQVksQ0FBQztHQUNyQjs7QUFFRCxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDdEMsUUFBTSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsVUFBQSxJQUFJLEVBQUk7QUFDdkUsUUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUN0QyxrQkFBWSxHQUFHO0FBQ2IsWUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTO0FBQ3BCLGFBQUssRUFBRSxJQUFJLENBQUMsS0FBSztPQUNsQixDQUFDO0FBQ0YsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0tBQ2IsTUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFOztBQUVsRCxVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7S0FDYjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxTQUFPLFlBQVksQ0FBQztDQUNyQiIsImZpbGUiOiIvdmFyL2ZvbGRlcnMveGYvcnNwaDRfYzU3MzE1cnM1N3h4c2Rza3J4bnYzNnQwL1QvdG1wcGZsNTJucHVibGlzaF9wYWNrYWdlcy9hcG0vaHlwZXJjbGljay9saWIvZ2V0LXdvcmQtdGV4dC1hbmQtcmFuZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcbi8qIEBmbG93ICovXG5cbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgbGljZW5zZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluXG4gKiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge1JhbmdlfSBmcm9tICdhdG9tJztcbmltcG9ydCB7ZGVmYXVsdFdvcmRSZWdFeHBGb3JFZGl0b3J9IGZyb20gJy4vaHlwZXJjbGljay11dGlscyc7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdGV4dCBhbmQgcmFuZ2UgZm9yIHRoZSB3b3JkIHRoYXQgY29udGFpbnMgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXb3JkVGV4dEFuZFJhbmdlKFxuICAgIHRleHRFZGl0b3I6IFRleHRFZGl0b3IsXG4gICAgcG9zaXRpb246IGF0b20kUG9pbnQsXG4gICAgd29yZFJlZ0V4cD86ID9SZWdFeHApOiB7dGV4dDogc3RyaW5nOyByYW5nZTogUmFuZ2V9IHtcbiAgbGV0IHRleHRBbmRSYW5nZSA9IHt0ZXh0OiAnJywgcmFuZ2U6IG5ldyBSYW5nZShwb3NpdGlvbiwgcG9zaXRpb24pfTtcbiAgd29yZFJlZ0V4cCA9IHdvcmRSZWdFeHAgfHwgZGVmYXVsdFdvcmRSZWdFeHBGb3JFZGl0b3IodGV4dEVkaXRvcik7XG4gIGlmICghd29yZFJlZ0V4cCkge1xuICAgIHJldHVybiB0ZXh0QW5kUmFuZ2U7XG4gIH1cblxuICBjb25zdCBidWZmZXIgPSB0ZXh0RWRpdG9yLmdldEJ1ZmZlcigpO1xuICBidWZmZXIuc2NhbkluUmFuZ2Uod29yZFJlZ0V4cCwgYnVmZmVyLnJhbmdlRm9yUm93KHBvc2l0aW9uLnJvdyksIGRhdGEgPT4ge1xuICAgIGlmIChkYXRhLnJhbmdlLmNvbnRhaW5zUG9pbnQocG9zaXRpb24pKSB7XG4gICAgICB0ZXh0QW5kUmFuZ2UgPSB7XG4gICAgICAgIHRleHQ6IGRhdGEubWF0Y2hUZXh0LFxuICAgICAgICByYW5nZTogZGF0YS5yYW5nZSxcbiAgICAgIH07XG4gICAgICBkYXRhLnN0b3AoKTtcbiAgICB9IGVsc2UgaWYgKGRhdGEucmFuZ2UuZW5kLmNvbHVtbiA+IHBvc2l0aW9uLmNvbHVtbikge1xuICAgICAgLy8gU3RvcCB0aGUgc2NhbiBpZiB0aGUgc2Nhbm5lciBoYXMgcGFzc2VkIG91ciBwb3NpdGlvbi5cbiAgICAgIGRhdGEuc3RvcCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHRleHRBbmRSYW5nZTtcbn1cbiJdfQ==
