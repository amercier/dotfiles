

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

var _atom = require('atom');

'use babel';

var hyperclick = null;

module.exports = {
  activate: function activate() {
    var Hyperclick = require('./Hyperclick');
    hyperclick = new Hyperclick();
  },

  deactivate: function deactivate() {
    if (hyperclick != null) {
      hyperclick.dispose();
      hyperclick = null;
    }
  },

  consumeProvider: function consumeProvider(provider) {
    if (typeof provider.providerName !== 'string') {
      throw new Error('Missing "providerName" property for hyperclick provider.');
    }
    if (hyperclick != null) {
      hyperclick.consumeProvider(provider);
      return new _atom.Disposable(function () {
        if (hyperclick != null) {
          hyperclick.removeProvider(provider);
        }
      });
    }
  },

  /**
   * A TextEditor whose creation is announced via atom.workspace.observeTextEditors() will be
   * observed by default by hyperclick. However, if a TextEditor is created via some other means,
   * (such as a building block for a piece of UI), then it must be observed explicitly.
   */
  observeTextEditor: function observeTextEditor() {
    return function (textEditor) {
      if (hyperclick != null) {
        hyperclick.observeTextEditor(textEditor);
      }
    };
  }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBwZmw1Mm5wdWJsaXNoX3BhY2thZ2VzL2FwbS9oeXBlcmNsaWNrL2xpYi9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7b0JBZXlCLE1BQU07O0FBZi9CLFdBQVcsQ0FBQzs7QUFjWixJQUFJLFVBQTJCLEdBQUcsSUFBSSxDQUFDOztBQUd2QyxNQUFNLENBQUMsT0FBTyxHQUFHO0FBQ2YsVUFBUSxFQUFBLG9CQUFHO0FBQ1QsUUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzNDLGNBQVUsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO0dBQy9COztBQUVELFlBQVUsRUFBQSxzQkFBRztBQUNYLFFBQUksVUFBVSxJQUFJLElBQUksRUFBRTtBQUN0QixnQkFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3JCLGdCQUFVLEdBQUcsSUFBSSxDQUFDO0tBQ25CO0dBQ0Y7O0FBRUQsaUJBQWUsRUFBQSx5QkFBQyxRQUF3RCxFQUFlO0FBQ3JGLFFBQUksT0FBTyxRQUFRLENBQUMsWUFBWSxLQUFLLFFBQVEsRUFBRTtBQUM3QyxZQUFNLElBQUksS0FBSyxDQUFDLDBEQUEwRCxDQUFDLENBQUM7S0FDN0U7QUFDRCxRQUFJLFVBQVUsSUFBSSxJQUFJLEVBQUU7QUFDdEIsZ0JBQVUsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDckMsYUFBTyxVQXJCTCxVQUFVLENBcUJVLFlBQU07QUFDMUIsWUFBSSxVQUFVLElBQUksSUFBSSxFQUFFO0FBQ3RCLG9CQUFVLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3JDO09BQ0YsQ0FBQyxDQUFDO0tBQ0o7R0FDRjs7Ozs7OztBQU9ELG1CQUFpQixFQUFBLDZCQUEwQztBQUN6RCxXQUFPLFVBQUMsVUFBVSxFQUFzQjtBQUN0QyxVQUFJLFVBQVUsSUFBSSxJQUFJLEVBQUU7QUFDdEIsa0JBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztPQUMxQztLQUNGLENBQUM7R0FDSDtDQUNGLENBQUMiLCJmaWxlIjoiL3Zhci9mb2xkZXJzL3hmL3JzcGg0X2M1NzMxNXJzNTd4eHNkc2tyeG52MzZ0MC9UL3RtcHBmbDUybnB1Ymxpc2hfcGFja2FnZXMvYXBtL2h5cGVyY2xpY2svbGliL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcbi8qIEBmbG93ICovXG5cbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgbGljZW5zZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluXG4gKiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7SHlwZXJjbGlja1Byb3ZpZGVyfSBmcm9tICdoeXBlcmNsaWNrLWludGVyZmFjZXMnO1xuaW1wb3J0IHR5cGUgSHlwZXJjbGlja1R5cGUgZnJvbSAnLi9IeXBlcmNsaWNrJztcblxubGV0IGh5cGVyY2xpY2s6ID9IeXBlcmNsaWNrVHlwZSA9IG51bGw7XG5pbXBvcnQge0Rpc3Bvc2FibGV9IGZyb20gJ2F0b20nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWN0aXZhdGUoKSB7XG4gICAgY29uc3QgSHlwZXJjbGljayA9IHJlcXVpcmUoJy4vSHlwZXJjbGljaycpO1xuICAgIGh5cGVyY2xpY2sgPSBuZXcgSHlwZXJjbGljaygpO1xuICB9LFxuXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgaWYgKGh5cGVyY2xpY2sgIT0gbnVsbCkge1xuICAgICAgaHlwZXJjbGljay5kaXNwb3NlKCk7XG4gICAgICBoeXBlcmNsaWNrID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgY29uc3VtZVByb3ZpZGVyKHByb3ZpZGVyOiBIeXBlcmNsaWNrUHJvdmlkZXIgfCBBcnJheTxIeXBlcmNsaWNrUHJvdmlkZXI+KTogP0Rpc3Bvc2FibGUge1xuICAgIGlmICh0eXBlb2YgcHJvdmlkZXIucHJvdmlkZXJOYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFwicHJvdmlkZXJOYW1lXCIgcHJvcGVydHkgZm9yIGh5cGVyY2xpY2sgcHJvdmlkZXIuJyk7XG4gICAgfVxuICAgIGlmIChoeXBlcmNsaWNrICE9IG51bGwpIHtcbiAgICAgIGh5cGVyY2xpY2suY29uc3VtZVByb3ZpZGVyKHByb3ZpZGVyKTtcbiAgICAgIHJldHVybiBuZXcgRGlzcG9zYWJsZSgoKSA9PiB7XG4gICAgICAgIGlmIChoeXBlcmNsaWNrICE9IG51bGwpIHtcbiAgICAgICAgICBoeXBlcmNsaWNrLnJlbW92ZVByb3ZpZGVyKHByb3ZpZGVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBIFRleHRFZGl0b3Igd2hvc2UgY3JlYXRpb24gaXMgYW5ub3VuY2VkIHZpYSBhdG9tLndvcmtzcGFjZS5vYnNlcnZlVGV4dEVkaXRvcnMoKSB3aWxsIGJlXG4gICAqIG9ic2VydmVkIGJ5IGRlZmF1bHQgYnkgaHlwZXJjbGljay4gSG93ZXZlciwgaWYgYSBUZXh0RWRpdG9yIGlzIGNyZWF0ZWQgdmlhIHNvbWUgb3RoZXIgbWVhbnMsXG4gICAqIChzdWNoIGFzIGEgYnVpbGRpbmcgYmxvY2sgZm9yIGEgcGllY2Ugb2YgVUkpLCB0aGVuIGl0IG11c3QgYmUgb2JzZXJ2ZWQgZXhwbGljaXRseS5cbiAgICovXG4gIG9ic2VydmVUZXh0RWRpdG9yKCk6ICh0ZXh0RWRpdG9yOiBhdG9tJFRleHRFZGl0b3IpID0+IHZvaWQge1xuICAgIHJldHVybiAodGV4dEVkaXRvcjogYXRvbSRUZXh0RWRpdG9yKSA9PiB7XG4gICAgICBpZiAoaHlwZXJjbGljayAhPSBudWxsKSB7XG4gICAgICAgIGh5cGVyY2xpY2sub2JzZXJ2ZVRleHRFZGl0b3IodGV4dEVkaXRvcik7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbn07XG4iXX0=
