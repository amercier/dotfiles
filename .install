#!/usr/bin/env bash --login

# Bash configuration
# ==================

DIR="$( cd "$( dirname "$0" )" && pwd )"
. "$DIR/.install.d/colors.rc"


# Run all scripts for which the command doesn't exist and no function exist
while read path; do
  [ -x "$path" ] || continue
  bin=$(basename "$path" | egrep -o '[^\.]+$')
  if which "$bin" > /dev/null; then
    echo -e "$(green ✔) $(yellow "$bin") is already installed"
  elif [ "$(type -t "$bin")" == "function" ]; then
    echo -e "$(green ✔) $(yellow "$bin") is already installed"
  else
    echo "Installing $(yellow "$bin")... "
    "$path"
    echo "$(green ✔) $(yellow "$bin") $(green installed successfully)"
  fi
done < <(find "$HOME/.install.d" -type f)
